<!DOCTYPE html>
<html lang="en">

<head>

    <!--====== CUSTOM CSS =======-->

    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/responsive.css">


    <!--====== BOOTSTRAP =======-->

    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">



    <!--====== ICONS =======-->
    <link rel="stylesheet" href="./assets/fonts/font-awesome-4.7.0/css/font-awesome.min.css">



    <!--====== FONTS =======-->
    <link rel="stylesheet" href="./assets/fonts/font-awesome-4.7.0/fonts/fontawesome-webfont3e6e.woff">
    <link rel="stylesheet" href="./assets/fonts/font-awesome-4.7.0/fonts/fontawesome-webfont3e6e.ttf">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details</title>
</head>

<body>


    <div class="search__container">
        <form action="">
            <div class="input__search">
                <input type="text" class="search__text">
                <button type="submit" class="search__btn"><i class="fa fa-search" aria-hidden="true"></i>
                </button>
            </div>
        </form>

        <i class="fa fa-times" aria-hidden="true"></i>

    </div>






    <!-- ===============  HEADER ================= -->


    <nav class="primary__nav menu__two">

        <ul class="top__menu" id="menu">
            <li class="menu__item"><a href="index.html" class="menu__link">Home</a></li>
            <li class="menu__item"><a href="products.html" class="menu__link">Shop</a></li>
            <li class="menu__item"><a href="cart.html" class="menu__link">Cart</a></li>
            <li class="menu__item"><a href="contact.html" class="menu__link">Contact</a></li>
            <li class="menu__item"><a href="register.html" class="menu__link">Register</a></li>
        </ul>


        <a href="#" class="menu__logo">
            <img src="./assets/images/icons/logo-01.png" alt="">
        </a>


        <div class="menu__right__icons">
            <i id="search__icon" class="fa fa-search" aria-hidden="true"></i>

            <div class="menu__cart" id="cart__box">
                <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                <span class="cart__count">2</span>

                <div class="cart__box" id="cart__container">
                    <div class="cart__items">
                        <div class="cart__item__single">
                            <div class="cart__image">
                                <img src="assets/images/best-sell-01.jpg" alt="">
                            </div>
                            <div class="cart__content">
                                <div class="product__name">
                                    Cherry
                                </div>
                                <div class="product__price">
                                    18$
                                </div>
                                <div class="product__quantity">
                                    <span class="quantity"> x2</span>
                                    <span class="cart__remove__btn">x</span>
                                </div>

                            </div>
                        </div>
                        <div class="cart__item__single">
                            <div class="cart__image">
                                <img src="assets/images/best-sell-02.jpg" alt="">
                            </div>
                            <div class="cart__content">
                                <div class="product__name">
                                    Cherry
                                </div>
                                <div class="product__price">
                                    18$
                                </div>
                                <div class="product__quantity">
                                    <span class="quantity"> x2</span>
                                    <span class="cart__remove__btn">x</span>
                                </div>

                            </div>
                        </div>
                    </div>


                    <hr>

                    <div class="cart__bill__details">
                        <div class="cart__bill">
                            <span class="title">Subtotal</span>
                            <span class="price">48$</span>
                        </div>
                        <div class="cart__bill">
                            <span class="title">Total</span>
                            <span class="price">48$</span>
                        </div>

                        <button class="cart__checkout__btn">
                            CHECKOUT
                        </button>
                    </div>

                </div>
            </div>


            <i class="fa fa-bars" id="menu__toggler__btn" aria-hidden="true"></i>

        </div>


    </nav>
    <header class="hero__section__two hero__section__three">


        <!-- Hero Section Start-->

        <div class="hero__section__two__inner">
            <div class="container">
                <h2 class="page__title">
                    SHOP
                </h2>
                <div class="her__breadcrumb"><a href="/index.html">Home</a>/ <span>Products</span></div>
            </div>
        </div>



        <!-- Hero Section End-->
    </header>

    <!-- header End here -->








    <section class="product__details">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-12">
                    <div class="product__image ">
                        <img src="assets/images/item-03.png" alt="">
                    </div>
                </div>
                <div class="col-lg-6 col-md-12 pt-4 ps-2 ps-md-4">
                    <div class="product__info">
                        <h2 class="product__detail__name mb-3">
                            <!-- Cauliflower -->
                        </h2>
                        <h3 class="product__detail__price">
                            19$
                        </h3>
                        <div class="ratings mt-4 d-flex align-items-center mb-4">
                            <span class="stars">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </span>
                            <span class="ms-4">1 customer review</span>
                        </div>

                        <p class="short__desc">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                            laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit.
                        </p>

                        <div class="row d-flex align-items-center my-5">
                            <div class="col-4">
                                <div class="quantity__plus__minus">
                                    <button id="minus">-</button>
                                    <span class="quantityCart">0</span>
                                    <button id="plus">+</button>
                                </div>
                            </div>
                            <div class="col-5 ms-4">

                                <form id="add_to_cart_form">
                                    <input type="hidden" id="product__id">
                                    <button type="submit" id="add_to__cart__btn"
                                        style="cursor: pointer ;color:inherit;color:#fff" class="btn__primary m-0">
                                        Add to cart
                                    </button>
                                </form>
                            </div>
                        </div>

                        <div class="other__details">
                            <div class="others" id="sku">SKU: <span>156</span></div>
                            <div class="others">CATEGORY: <span class="product__detail__category"></span></div>
                            <div class="others" id="sku">TAGS: <span>HEALTHY, ORGANIC</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>







    <!-- PRODUCTS SECTION -->

    <section class="products">
        <div class="container">

            <div class="container">
                <div class="row">
                    <div class="col-12 text-right">
                        <h1>
                            RELATED PRODUCTS
                        </h1>
                    </div>
                </div>

            </div>

            <div class="products__grid" id="allProducts">


                <!--    <a href="product-details.html">
                    <div class="product">
                        <img src="assets/images/product-01.jpg" alt="" class="product__image">
                        <div class="products__details">
                            <h3 class="product__title">Red pumpkin</h3>
                            <h5 class="product__price">21$</h5>
                            <div class="product__icons__row">
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-heart-o" aria-hidden="true"></i>
                                    </span>
                                </a>
                            </div>
                        </div>

                    </div>
                </a>
                <a href="product-details.html">
                    <div class="product">
                        <img src="assets/images/product-02.jpg" alt="" class="product__image">
                        <div class="products__details">
                            <h3 class="product__title">Strawberry</h3>
                            <h5 class="product__price">23$</h5>

                            <div class="product__icons__row">
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-heart-o" aria-hidden="true"></i>
                                    </span>
                                </a>
                            </div>


                        </div>
                    </div>
                </a>
                <a href="product-details.html">
                    <div class="product">
                        <img src="assets/images/product-03.jpg" alt="" class="product__image">
                        <div class="products__details">
                            <h3 class="product__title">Cauliflower</h3>
                            <h5 class="product__price">19$</h5>

                            <div class="product__icons__row">
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-heart-o" aria-hidden="true"></i>
                                    </span>
                                </a>
                            </div>


                        </div>
                    </div>
                </a>
                <a href="product-details.html">
                    <div class="product">
                        <img src="assets/images/product-04.jpg" alt="" class="product__image">
                        <div class="products__details">
                            <h3 class="product__title">Vegetable</h3>
                            <h5 class="product__price">22$</h5>

                            <div class="product__icons__row">
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-heart-o" aria-hidden="true"></i>
                                    </span>
                                </a>
                            </div>


                        </div>
                    </div>
                </a>
                <a href="product-details.html">
                    <div class="product">
                        <img src="assets/images/product-05.jpg" alt="" class="product__image">
                        <div class="products__details">
                            <h3 class="product__title">Bell pepper</h3>
                            <h5 class="product__price">12$</h5>

                            <div class="product__icons__row">
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                </a>
                                <a class="product__icon" href="#">
                                    <span>
                                        <i class="fa fa-heart-o" aria-hidden="true"></i>
                                    </span>
                                </a>
                            </div>


                        </div>
                    </div>
                </a>
                <a href="product-details.html"></a>
                <div class="product">
                    <img src="assets/images/product-06.jpg" alt="" class="product__image">
                    <div class="products__details">
                        <h3 class="product__title">Beetroot</h3>
                        <h5 class="product__price">9$</h5>

                        <div class="product__icons__row">
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </span>
                            </a>
                            <a class="product__icon" href="#">
                                <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                            </a>
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-heart-o" aria-hidden="true"></i>
                                </span>
                            </a>
                        </div>


                    </div>
                </div>
                </a>
                <a href="product-details.html"></a>
                <div class="product">
                    <img src="assets/images/product-07.jpg" alt="" class="product__image">
                    <div class="products__details">
                        <h3 class="product__title">Cabbage</h3>
                        <h5 class="product__price">15$</h5>

                        <div class="product__icons__row">
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </span>
                            </a>
                            <a class="product__icon" href="#">
                                <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                            </a>
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-heart-o" aria-hidden="true"></i>
                                </span>
                            </a>
                        </div>


                    </div>
                </div>
                </a>
                <a href="product-details.html"></a>
                <div class="product">
                    <img src="assets/images/product-08.jpg" alt="" class="product__image">
                    <div class="products__details">
                        <h3 class="product__title">Tomato</h3>
                        <h5 class="product__price">38$</h5>

                        <div class="product__icons__row">
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-search" aria-hidden="true"></i>
                                </span>
                            </a>
                            <a class="product__icon" href="#">
                                <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                            </a>
                            <a class="product__icon" href="#">
                                <span>
                                    <i class="fa fa-heart-o" aria-hidden="true"></i>
                                </span>
                            </a>
                        </div>


                    </div>
                </div>
                </a>-->

            </div>
        </div>

    </section>





    <!-- PROFUCTS SECTION END  -->














    <!-- SPONSERS SECTION START -->


    <section class="sponsers">
        <div class="container pt-5 border border-top-1 border-bottom-0 border-start-0 border-end-0">
            <div class="sponsers__images">
                <img src="assets/images/icons/symbol-07.png" alt="">

                <img src="assets/images/icons/symbol-08.png" alt="">

                <img src="assets/images/icons/symbol-09.png" alt="">

                <img src="assets/images/icons/symbol-10.png" alt="">

                <img src="assets/images/icons/symbol-11.png" alt="">

            </div>
        </div>
    </section>



    <!-- SPONSERS SECTION END -->









    <!-- SECTION NEWSLETTER START -->


    <section class="newsletter">
        <div class="container px-2 px-sm-5">
            <div class="row px-2 px-sm-4 d-flex align-items-center">
                <div class="col-lg-5  col-md-12 mb-4 mb-md-0">
                    <h3 class="newsletter__title">SUBSCRIBE NEWSLETTER</h3>
                    <p class="newsletter__subtitle">
                        Get e-mail updates about our latest shop and special offers.
                    </p>
                </div>
                <div class="col-lg-7  col-md-12 mb-4 mb-md-0">
                    <form action="">
                        <div class="input__container">
                            <input type="email" class="newsletter__email">
                            <input type="submit" class="newsletter__btn" value="SUBSCRIBE">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION NEWSLETTER END-->








    <!-- FOOTER SECTION START -->

    <footer class="footer__main">
        <div class="container px-2 px-sm-5">
            <div class="row px-2 px-sm-4">
                <div class="col-lg-5 col-md-12 mb-3 m4-md-0">
                    <img src="assets/images/icons/logo-01.png" alt="" class="footer__logo">
                    <p class="footer__text">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aliquam omnis
                        eveniet in, quam laudantium beatae iste adipisci? Officiis, dolorem quos.</p>
                    <div class="footer__address">
                        <div class="address__row">
                            <div class="address"><img src="assets/images/icons/icon-mail.png" alt=""> example@gmail.com
                            </div>
                            <div class="address"><img src="assets/images/icons/icon-pin.png" alt=""> Hasan Colony,
                                Street No 9, RYK</div>
                            <div class="address"><img src="assets/images/icons/icon-phone.png" alt=""> +92 300 0000000
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2  col-md-12 mb-4 mb-md-0">
                    <h3 class="footer__main__title">
                        Information
                    </h3>
                    <ul>
                        <li>About out shop</li>
                        <li>Top Sellers</li>
                        <li>Our Blog</li>
                        <li>New Products</li>
                        <li>Secure Shopping</li>
                    </ul>
                </div>
                <div class="col-lg-2  col-md-12 mb-4 mb-md-0">
                    <h3 class="footer__main__title">
                        My Account
                    </h3>
                    <ul>
                        <li>My account</li>
                        <li>Discount</li>
                        <li>Personal information</li>
                        <li>My address</li>
                        <li>Order history</li>

                    </ul>
                </div>
                <div class="col-lg-3  col-md-12 mb-4 mb-md-0">
                    <h3 class="footer__main__title">
                        Instagaram
                    </h3>
                    <div class="footer__gallery">
                        <div class="gallery__image">
                            <img src="assets/images/instagram-01.jpg" alt="">
                        </div>
                        <div class="gallery__image">
                            <img src="assets/images/instagram-02.jpg" alt="">
                        </div>
                        <div class="gallery__image">
                            <img src="assets/images/instagram-03.jpg" alt="">
                        </div>
                        <div class="gallery__image">
                            <img src="assets/images/instagram-04.jpg" alt="">
                        </div>
                        <div class="gallery__image">
                            <img src="assets/images/instagram-05.jpg" alt="">
                        </div>
                        <div class="gallery__image">
                            <img src="assets/images/instagram-06.jpg" alt="">
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row mt-5 pb-3 d-flex align-items-center">
                <div class="col-lg-5 col-sm-6 mt-2">
                    <p class="footer__copyright">
                        Copyright &copy;
                        <script>
                            document.write(new Date().getFullYear())
                        </script>Builtinsoft. All rights reserved.
                    </p>
                </div>
                <div
                    class="col-lg-7 col-sm-6 d-flex align-items-center justify-content-start flex-wrap justify-content-sm-end">
                    <img class=" my-2 my-sm-0 mx-3" src="assets/images/icons/icon-pay-01.png" alt="">
                    <img class="mx-3 my-2 my-sm-0" src="assets/images/icons/icon-pay-02.png" alt="">
                    <img class="mx-3 my-2 my-sm-0" src="assets/images/icons/icon-pay-03.png" alt="">
                    <img class="mx-3 my-2 my-sm-0" src="assets/images/icons/icon-pay-04.png" alt="">
                    <img class="mx-3 my-2 my-sm-0" src="assets/images/icons/icon-pay-05.png" alt="">
                </div>
            </div>
        </div>


    </footer>



    <!-- ===============  FOOTER END ================= -->






    <!--====== Plugins =======-->

    <script src="./assets/plugins/jquery/jquery-3.2.1.min.js"></script>
    <script src="./assets/js/script.js"></script>
    <script>


        const quantityCount = document.querySelector(".quantityCart")
        var product__id = document.querySelector("#product__id")
        var add_to_cart_form = document.querySelector("#add_to_cart_form")
        var add_to__cart__btn = document.querySelector("#add_to__cart__btn")
        var oldItemsInCart = Array.from(JSON.parse(localStorage.getItem('id')))

        add_to__cart__btn.addEventListener("click", function (e) {
            e.preventDefault()
            let item_id = product__id.value
            // console.log(item_id)
            // console.log(oldItemsInCart)
            let findIfItemeExists = oldItemsInCart.find(function (item) {
                return item.id === item_id
            })
            if (findIfItemeExists) {
                console.log("Item already added to cart")
            } else {
                if (parseInt(quantityCount.innerText) > 0) {
                    let user = JSON.parse(localStorage.getItem('user'))
                    oldItemsInCart.push({ id: item_id, quantity: parseInt(quantityCount.innerText), userEmail: user.email })
                    localStorage.setItem('id', JSON.stringify(oldItemsInCart))
                }

            }
        })

        const minus = document.getElementById("minus")
        const plus = document.getElementById("plus")
        var count
        minus.addEventListener("click", () => {
            console.log(quantityCount.innerText)
            count = parseInt(quantityCount.innerText)
            if (count > 0) {
                count--
                quantityCount.innerText = count
            } else {
                quantityCount.innerText = 0
            }
        })

        plus.addEventListener("click", () => {
            count = parseInt(quantityCount.innerText)
            count++
            quantityCount.innerText = count
        })





        var categoryName
        const params = new URLSearchParams(window.location.search)
        let id = params.get('id')

        var product__name = document.querySelector(".product__detail__name"),
            product__price = document.querySelector(".product__detail__price"),
            short__desc = document.querySelector(".short__desc"),
            product__image = document.querySelector(".product__image img"),
            categoryHtml = document.querySelector(".product__detail__category");
        add_to__cart__btn = document.querySelector("#add_to__cart__btn");


        fetchSingleProduct('http://localhost:4000/get-single-product/' + id)


        function showData(product) {
            const { description, image, name, price, quantity, _id } = product[0]
            categoryName = product[1]
            product__name.innerText = product[0].name
            product__price.innerText = price
            short__desc.innerText = description
            product__image.src = "/uploads/" + image
            categoryHtml.innerHTML = categoryName.toUpperCase()
            product__id.value = _id;
        }

        async function fetchSingleProduct(url) {

            await fetch(url).then(async function (res) {
                return await res.json()
            }).then(function (result) {
                // console.log(result.data);
                showData(result.data)

            }).catch(function (err) {
                console.log(err);
            })
        }






















        fetchProducts('http://localhost:4000/get-related-products/' + id)

        const allProducts = document.getElementById('allProducts');

        function appendData(data) {
            let productHtml = ``;
            let aLink
            data.forEach(function (product) {
                productHtml += `
                <a href="/product-details.html?id=${product._id}">
                <div class="product">
                            <img src="/uploads/${product.image}" alt="" class="product__image">
                            <div class="products__details">
                                <h3 class="product__title">${product.name}</h3>
                                <h5 class="product__price">21$</h5>
                                <div class="product__icons__row">
                                    <a class="product__icon" href="#">
                                        <span>
                                            <i class="fa fa-search" aria-hidden="true"></i>
                                        </span>
                                    </a>
                                    <a class="product__icon" href="#">
                                        <span><i class="fa fa-shopping-cart" aria-hidden="true"></i></span>
                                    </a>
                                    <a class="product__icon" href="#">
                                        <span>
                                            <i class="fa fa-heart-o" aria-hidden="true"></i>
                                        </span>
                                    </a>
                                </div>
                            </div>

                        </div>
                        </a>
                `;
            })
            allProducts.innerHTML = productHtml
        }


        async function fetchProducts(url) {

            await fetch(url).then(async function (res) {
                return await res.json()
            }).then(function (result) {
                // console.log(result.data);
                appendData(result.data)

            }).catch(function (err) {
                console.log(err);
            })
        }


    </script>
</body>

</html>